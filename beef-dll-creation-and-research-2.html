<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Beef DLL Creation &amp; Research - Based And Pasted</title><meta name="description" content=" Beef language is still in heavy development. Anything and anytime can change in Beef language and thus this document may not be valid anymore! Beef is an open source performance-oriented compiled programming language. Basically it's C language with C# like syntax. OOP paradigm also&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://m0n7y5.github.io/beef-dll-creation-and-research-2.html"><link rel="alternate" type="application/atom+xml" href="https://m0n7y5.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://m0n7y5.github.io/feed.json"><meta property="og:title" content="Beef DLL Creation & Research"><meta property="og:site_name" content="Based And Pasted"><meta property="og:description" content=" Beef language is still in heavy development. Anything and anytime can change in Beef language and thus this document may not be valid anymore! Beef is an open source performance-oriented compiled programming language. Basically it's C language with C# like syntax. OOP paradigm also&hellip;"><meta property="og:url" content="https://m0n7y5.github.io/beef-dll-creation-and-research-2.html"><meta property="og:type" content="article"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Roboto:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>:root{--body-font:'Open Sans',sans-serif;--heading-font:'Roboto',sans-serif;--logo-font:'Roboto',sans-serif;--menu-font:'Roboto',sans-serif}</style><link rel="stylesheet" href="https://m0n7y5.github.io/assets/css/style.css?v=b2809a75655d751b3d4b8f18ae0dcea9"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://m0n7y5.github.io/beef-dll-creation-and-research-2.html"},"headline":"Beef DLL Creation & Research","datePublished":"2020-09-01T15:52","dateModified":"2020-09-01T17:43","description":" Beef language is still in heavy development. Anything and anytime can change in Beef language and thus this document may not be valid anymore! Beef is an open source performance-oriented compiled programming language. Basically it's C language with C# like syntax. OOP paradigm also&hellip;","author":{"@type":"Person","name":"Admin"},"publisher":{"@type":"Organization","name":"Admin"}}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/styles/default.min.css" type="text/css"><script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" href="vs2015.css"></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://m0n7y5.github.io/">Based And Pasted</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://m0n7y5.github.io/" target="_self">Home</a></li><li><a href="https://m0n7y5.github.io/about-me.html" target="_self">About me</a></li></ul></nav></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://m0n7y5.github.io/media/website/getty_660582997_412145.jpg" srcset="https://m0n7y5.github.io/media/website/responsive/getty_660582997_412145-xs.jpg 300w, https://m0n7y5.github.io/media/website/responsive/getty_660582997_412145-sm.jpg 480w, https://m0n7y5.github.io/media/website/responsive/getty_660582997_412145-md.jpg 768w, https://m0n7y5.github.io/media/website/responsive/getty_660582997_412145-lg.jpg 1024w, https://m0n7y5.github.io/media/website/responsive/getty_660582997_412145-xl.jpg 1360w, https://m0n7y5.github.io/media/website/responsive/getty_660582997_412145-2xl.jpg 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2020-09-01T15:52">September 1, 2020</time></div><h1>Beef DLL Creation &amp; Research</h1><div class="post__meta post__meta--author"><a href="https://m0n7y5.github.io/authors/admin/" class="feed__author invert">Admin</a></div></div></header></div><div class="wrapper post__entry"><p class="msg msg--warning">Beef language is still in heavy development. Anything and anytime can change in Beef language and thus this document may not be valid anymore!</p><p></p><div class="post__toc"><h3>Content</h3><ul><li><a href="#requirementsnbspbr">Requirements&nbsp;<br></a></li><li><a href="#about-beefbr">About Beef<br></a></li><li><a href="#classic-dll-with-exported-methods">Classic DLL with exported methods</a></li><li><a href="#dll-with-dllmain">DLL with DllMain</a></li><li><a href="#how-to-work-with-threads-in-dll">How to work with threads in DLL</a></li></ul></div><h2 id="requirementsnbspbr">Requirements&nbsp;<br></h2><ul><li>Latest BeefIDE (nightly)</li><li>DebugView++</li></ul><h2 id="about-beefbr">About Beef<br></h2><p>Beef is an open source performance-oriented compiled programming language. Basically it's C language with C# like syntax. OOP paradigm also can be used for developing applications since in Beef u can create custom reference types (Objects) and combine it with polymorphism. Reflection is also possible. Its quiet fast and its fun to work with. More info can be found here -&gt; https://www.beeflang.org/</p><h2 id="classic-dll-with-exported-methods">Classic DLL with exported methods</h2><p class="msg msg--info">Todo</p><h2 id="dll-with-dllmain">DLL with DllMain</h2><p>So first we need to create DLL project in Beef IDE. Go to File -&gt; New -&gt; New Project and choose Dynamic Library.</p><figure class="post__image post__image--center"><img loading="lazy" src="https://m0n7y5.github.io/media/posts/4/ProjectCreation.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://m0n7y5.github.io/media/posts/4/responsive/ProjectCreation-xs.png 300w, https://m0n7y5.github.io/media/posts/4/responsive/ProjectCreation-sm.png 480w, https://m0n7y5.github.io/media/posts/4/responsive/ProjectCreation-md.png 768w, https://m0n7y5.github.io/media/posts/4/responsive/ProjectCreation-lg.png 1024w, https://m0n7y5.github.io/media/posts/4/responsive/ProjectCreation-xl.png 1360w, https://m0n7y5.github.io/media/posts/4/responsive/ProjectCreation-2xl.png 1600w" height="282" width="372" alt=""></figure><p>Now we need to add new class called Program. Like this:</p><pre class="line-numbers language-csharp"><code>namespace DLLResearch
{
	public static class Program
	{
	}
}</code></pre><p>So... Normally when you are creating DLL (for example in C/++) you gonna define DllMain method which is gonna by called when some process gonna try to load our library using, for example, LoadLibrary function from Win32 API. However, this is not possible in Beef since DllMain is already handled by Beef Runtime.<br><br>So what we gonna do now? ðŸ¤” It turns out that solution is very simple. Only thing we need to do is write public static constructor and deconstructor for class Program.</p><pre class="line-numbers language-csharp"><code>using System.Diagnostics;
using System;
namespace DLLResearch
{
    [AlwaysInclude] // &lt;- We need this to include our class in DLL, Normally u dont need this
	public static class Program
	{
		public static this() // &lt;- This will gets called when our library gets loaded
		{
			Debug.WriteLine("Hello From Beef DLL :3");
		}

		public static ~this() // &lt;- This will gets called when our library gets unloaded
		{
			Debug.WriteLine("See ya next time my friend :)");
		}
	}
}</code></pre><p>So lets compile it and inject it into some process. I am gonna use notepad.<br>As u can see, when we inject our library into notepad we can see this in DebugView++.<br></p><figure class="post__image post__image--center"><img loading="lazy" src="https://m0n7y5.github.io/media/posts/4/Loaded1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://m0n7y5.github.io/media/posts/4/responsive/Loaded1-xs.png 300w, https://m0n7y5.github.io/media/posts/4/responsive/Loaded1-sm.png 480w, https://m0n7y5.github.io/media/posts/4/responsive/Loaded1-md.png 768w, https://m0n7y5.github.io/media/posts/4/responsive/Loaded1-lg.png 1024w, https://m0n7y5.github.io/media/posts/4/responsive/Loaded1-xl.png 1360w, https://m0n7y5.github.io/media/posts/4/responsive/Loaded1-2xl.png 1600w" height="130" width="701" alt=""></figure><p>Our constructor get called and we printed first message. So lets try to unload our library and lets see what happens.&nbsp;<br></p><figure class="post__image post__image--center"><img loading="lazy" src="https://m0n7y5.github.io/media/posts/4/Unloaded1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://m0n7y5.github.io/media/posts/4/responsive/Unloaded1-xs.png 300w, https://m0n7y5.github.io/media/posts/4/responsive/Unloaded1-sm.png 480w, https://m0n7y5.github.io/media/posts/4/responsive/Unloaded1-md.png 768w, https://m0n7y5.github.io/media/posts/4/responsive/Unloaded1-lg.png 1024w, https://m0n7y5.github.io/media/posts/4/responsive/Unloaded1-xl.png 1360w, https://m0n7y5.github.io/media/posts/4/responsive/Unloaded1-2xl.png 1600w" height="142" width="686" alt=""></figure><p>Looks like our deconstructor gets also called.<br></p><p class="msg msg--highlight">Note: Our deconstructor also gets called when process, where our library is loaded, gonna exit.<br></p><h2 id="how-to-work-with-threads-in-dll">How to work with threads in DLL</h2><p class="msg msg--info">Todo</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on September 1, 2020</p><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fm0n7y5.github.io%2Fbeef-dll-creation-and-research-2.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://m0n7y5.github.io/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span></a></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://m0n7y5.github.io/authors/admin/" class="invert" rel="author">Admin</a></h3></div></div></footer></article></main><footer class="footer"><div class="footer__copyright"><p>Info</p><p>Â </p><div class="github-card" data-github="M0n7y5" data-width="400" data-height="152" data-theme="default">Â </div></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://m0n7y5.github.io/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://m0n7y5.github.io/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script src="https://cdn.jsdelivr.net/github-cards/latest/widget.js"></script><div class="cookie-popup js-cookie-popup cookie-popup--uses-badge"><h2>This website uses cookies</h2><p>Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="#not-specified">More details...</a></p><form><input id="gdpr-necessary" name="gdpr-necessary" checked="checked" disabled="disabled" type="checkbox"> <label for="gdpr-necessary">Required</label> <input id="gdpr-functions" name="gdpr-functions" type="checkbox"> <label for="gdpr-functions">Functionality</label> <input id="gdpr-analytics" name="gdpr-analytics" type="checkbox"> <label for="gdpr-analytics">Analytical</label> <input id="gdpr-marketing" name="gdpr-marketing" type="checkbox"> <label for="gdpr-marketing">Marketing</label><p class="cookie-popup__save-wrapper"><button type="submit" class="cookie-popup__save">Save</button></p></form><span class="cookie-popup-label">Cookie Policy</span></div><script>(function() {
                function addScript (src, inline) {
                    var newScript = document.createElement('script');

                    if (src) {
                        newScript.setAttribute('src', src);
                    }

                    if (inline) {
                        newScript.text = inline;
                    }

                    document.body.appendChild(newScript);
                }

                var popup = document.querySelector('.js-cookie-popup');
                var checkboxes = popup.querySelectorAll('input[type="checkbox"]');
                var save = popup.querySelector('button');
                var currentConfig = localStorage.getItem('publii-gdpr-allowed-cookies');
                var blockedScripts = document.querySelectorAll('script[type^="gdpr-blocker/"]');
                

                popup.addEventListener('click', function() {
                    if (!popup.classList.contains('cookie-popup--is-sticky')) {
                        popup.classList.add('cookie-popup--is-sticky');
                    }
                });

                save.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    popup.classList.remove('cookie-popup--is-sticky');
                    var allowedGroups = [];

                    for (var i = 0; i < checkboxes.length; i++) {
                        if (checkboxes[i].checked) {
                            var groupName = checkboxes[i].getAttribute('name').replace('gdpr-', '');
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + groupName + '"]');

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }

                            allowedGroups.push(groupName);
                        }
                    }

                    localStorage.setItem('publii-gdpr-allowed-cookies', allowedGroups.join(','));
                    popup.classList.remove('cookie-popup--is-sticky');

                    setTimeout(function () {
                        if (currentConfig !== null) {
                            window.location.reload();
                        }
                    }, 250);
                });

                if (currentConfig === null) {
                    popup.classList.add('cookie-popup--is-sticky');
                } else {
                    if (currentConfig !== '') {
                        var allowedGroups = currentConfig.split(',');

                        for (var i = 0; i < allowedGroups.length; i++) {
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroups[i] + '"]');
                            var checkbox = popup.querySelector('input[type="checkbox"][name="gdpr-' + allowedGroups[i] + '"]');

                            if (checkbox) {
                                checkbox.checked = true;
                            }

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }
                        }
                    }
                }
            })();</script></body></html>